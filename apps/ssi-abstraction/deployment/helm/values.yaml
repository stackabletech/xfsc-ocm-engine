# -- Default number of instances to start
replicaCount: 1
# -- Application name
name: ssi-abstraction
# -- Ovverwrites application name
nameOverride: ''

image:
  repository: eu.gcr.io/vrgn-infra-prj
  # -- Image name
  name: gaiax/ssi-abstraction
  # -- Image tag
  # Uses .Chart.AppVersion if empty
  tag: ''
  # -- Image sha, usually generated by the CI
  # Uses image.tag if empty
  sha: ''
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Image pull secret when internal image is used
  pullSecrets: deployment-key-light

podAnnotations: {}
##
## Pass extra environment variables to the container.
##
# extraVars:
# - name: EXTRA_VAR_1
#   value: extra-var-value-1
# - name: EXTRA_VAR_2
#   value: extra-var-value-2
##
## Create new service when true, and use the specified uner name when set to the name specified
##

resources:
  requests:
    cpu: 25m
    memory: 64Mi
  limits:
    cpu: 150m
    memory: 512Mi

## Configure pod autoscaling
##

autoscaling:
  # -- Enable autoscaling
  enabled: false
  # -- Minimum replicas
  minReplicas: 1
  # -- Maximum replicas
  maxReplicas: 3
  # -- CPU target for autoscaling trigger
  targetCPUUtilizationPercentage: 70
  # -- Memory target for autoscaling trigger
  targetMemoryUtilizationPercentage: 70
##
## Prometheus Exporter / Metrics
##

metrics:
  # -- Enable prometheus metrics
  enabled: true
  # -- Port for prometheus metrics
  port: 2112

log:
  level: 'INFO'
  encoding: json

##
## Kubernetes [SecurityContext](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/) object.
##

security:
  # -- by default, apps run as non-root
  runAsNonRoot: false
  # -- User used by the apps
  runAsUid: 0
  # -- Group used by the apps
  runAsGid: 0
##
##
service:
  port: 3009

ssiAbstraction:
  agent:
    name: ssi-abstraction-agent
    host: gaiax.vereign.com
    protocol: http
    inboundPort: 443
    urlPath: /ocm/didcomm
    publicDidSeed: 6b8b882e2618fa5d45ee7229ca880083
    autoAccept:
      connection: true
      credential: true
    wallet:
      key: ssi-wallet-key
      id: ssi-wallet-id
    ledgerId: ID_UNION
  database:
    host: postgresql.infra
    user: root
    password: password
    port: 5432
    schema: proof
    db: postgres
  nats:
    url: nats
    port: 4222
    protocol: nats
  elastic:
    url: elasticsearch
    port: 9200
    protocol: http
ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-production-http
    kubernetes.io/ingress.class: nginx
    kubernetes.io/ingress.global-static-ip-name: dev-light-public
    nginx.ingress.kubernetes.io/rewrite-target: /$2
  tlsEnabled: true
  frontendDomain: gaiax.vereign.com
  frontendTlsSecretName: cert-manager-tls
  pathOverride: didcomm
